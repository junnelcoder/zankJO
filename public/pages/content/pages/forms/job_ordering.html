<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>YoraUI Admin</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="../../../../css/vendors/mdi/css/materialdesignicons.min.css">
  <link rel="stylesheet" href="../../../../css/vendors/css/vendor.bundle.base.css">
  <!-- endinject -->
  <!-- plugin css for this page -->
  <link rel="stylesheet" href="../../../../css/vendors/select2/select2.min.css">
  <link rel="stylesheet" href="../../../../css/vendors/select2-bootstrap-theme/select2-bootstrap.min.css">
  <!-- End plugin css for this page -->
  <!-- inject:css -->
  <link rel="stylesheet" href="../../../../css/css/vertical-layout-light/style.css">
  <!-- endinject -->
  <link rel="shortcut icon" href="../../../../css/images/favicon.png" />
</head>

<body class="sidebar-fixed">
  <div class="container-scroller">
    <!-- partial:../../partials/_navbar.html -->
    <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
      <div class="text-center navbar-brand-wrapper d-flex align-items-center">
        <a class="navbar-brand brand-logo" href="../../index.html"><img src="../../../../css/images/logo.png" alt="logo"/></a>
        <a class="navbar-brand brand-logo-mini" href="../../index.html"><img src="../../../../css/images/logo-mini.png" alt="logo"/></a>
      </div>
      <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
        <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
          <span class="mdi mdi-menu"></span>
        </button>
        <ul class="navbar-nav mr-lg-2">
          <li class="nav-item nav-search d-none d-lg-block">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text" id="search">
                  <i class="mdi mdi-magnify"></i>
                </span>
              </div>
              <input type="text" class="form-control" placeholder="Search for anything..." aria-label="search" aria-describedby="search">
            </div>
          </li>
        </ul>
        <ul class="navbar-nav navbar-nav-right">
          <li class="nav-item dropdown">
            <a class="nav-link count-indicator dropdown-toggle d-flex justify-content-center align-items-center" id="messageDropdown" href="#" data-toggle="dropdown">
              <i class="mdi mdi-email-outline mx-0"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="messageDropdown">
              <p class="mb-0 font-weight-normal float-left dropdown-header">Messages</p>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                    <img src="https://via.placeholder.com/36x36" alt="image" class="profile-pic">
                </div>
                <div class="preview-item-content flex-grow">
                  <h6 class="preview-subject ellipsis font-weight-normal">David Grey
                  </h6>
                  <p class="font-weight-light small-text text-muted mb-0">
                    The meeting is cancelled
                  </p>
                </div>
              </a>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                    <img src="https://via.placeholder.com/36x36" alt="image" class="profile-pic">
                </div>
                <div class="preview-item-content flex-grow">
                  <h6 class="preview-subject ellipsis font-weight-normal">Tim Cook
                  </h6>
                  <p class="font-weight-light small-text text-muted mb-0">
                    New product launch
                  </p>
                </div>
              </a>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                    <img src="https://via.placeholder.com/36x36" alt="image" class="profile-pic">
                </div>
                <div class="preview-item-content flex-grow">
                  <h6 class="preview-subject ellipsis font-weight-normal"> Johnson
                  </h6>
                  <p class="font-weight-light small-text text-muted mb-0">
                    Upcoming board meeting
                  </p>
                </div>
              </a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link count-indicator dropdown-toggle d-flex align-items-center justify-content-center" id="notificationDropdown" href="#" data-toggle="dropdown">
              <i class="mdi mdi-bell-outline mx-0"></i>
              <span class="count"></span>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list" aria-labelledby="notificationDropdown">
              <p class="mb-0 font-weight-normal float-left dropdown-header">Notifications</p>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                  <div class="preview-icon bg-success">
                    <i class="mdi mdi-information mx-0"></i>
                  </div>
                </div>
                <div class="preview-item-content">
                  <h6 class="preview-subject font-weight-normal">Application Error</h6>
                  <p class="font-weight-light small-text mb-0 text-muted">
                    Just now
                  </p>
                </div>
              </a>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                  <div class="preview-icon bg-warning">
                    <i class="mdi mdi-settings mx-0"></i>
                  </div>
                </div>
                <div class="preview-item-content">
                  <h6 class="preview-subject font-weight-normal">Settings</h6>
                  <p class="font-weight-light small-text mb-0 text-muted">
                    Private message
                  </p>
                </div>
              </a>
              <a class="dropdown-item preview-item">
                <div class="preview-thumbnail">
                  <div class="preview-icon bg-info">
                    <i class="mdi mdi-account-box mx-0"></i>
                  </div>
                </div>
                <div class="preview-item-content">
                  <h6 class="preview-subject font-weight-normal">New user registration</h6>
                  <p class="font-weight-light small-text mb-0 text-muted">
                    2 days ago
                  </p>
                </div>
              </a>
            </div>
          </li>
          <li class="nav-item nav-profile dropdown">
            <a class="nav-link" href="#" data-toggle="dropdown" id="profileDropdown">
              <img src="https://via.placeholder.com/30x30" alt="profile"/>
            </a>
            <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
              <a class="dropdown-item">
                <i class="mdi mdi-settings "></i>
                Settings
              </a>
              <a class="dropdown-item">
                <i class="mdi mdi-logout"></i>
                Logout
              </a>
            </div>
          </li>
          <li class="nav-item nav-settings d-none d-lg-flex">
            <a class="nav-link" href="#">
              <i class="mdi mdi-dots-horizontal"></i>
            </a>
          </li>
        </ul>
        <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
          <span class="mdi mdi-menu"></span>
        </button>
      </div>
    </nav>
    <!-- partial -->
    <div class="container-fluid page-body-wrapper">
      <!-- partial:../../partials/_settings-panel.html -->
      <div class="theme-setting-wrapper">
        <div id="settings-trigger"><i class="mdi mdi-settings"></i></div>
        <div id="theme-settings" class="settings-panel">
          <i class="settings-close mdi mdi-close"></i>
          <p class="settings-heading">SIDEBAR SKINS</p>
          <div class="sidebar-bg-options selected" id="sidebar-light-theme"><div class="img-ss rounded-circle bg-light border mr-3"></div>Light</div>
          <div class="sidebar-bg-options" id="sidebar-dark-theme"><div class="img-ss rounded-circle bg-dark border mr-3"></div>Dark</div>
          <p class="settings-heading mt-2">HEADER SKINS</p>
          <div class="color-tiles mx-0 px-4">
            <div class="tiles primary"></div>
            <div class="tiles secondary"></div>
            <div class="tiles dark"></div>
            <div class="tiles default"></div>
          </div>
        </div>
      </div>
      <div id="right-sidebar" class="settings-panel">
        <i class="settings-close mdi mdi-close"></i>
        <ul class="nav nav-tabs" id="setting-panel" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" id="todo-tab" data-toggle="tab" href="#todo-section" role="tab" aria-controls="todo-section" aria-expanded="true">TO DO LIST</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="chats-tab" data-toggle="tab" href="#chats-section" role="tab" aria-controls="chats-section">CHATS</a>
          </li>
        </ul>
        <div class="tab-content" id="setting-content">
          <div class="tab-pane fade show active scroll-wrapper" id="todo-section" role="tabpanel" aria-labelledby="todo-section">
            <div class="add-items d-flex px-3 mb-0">
              <form class="form w-100">
                <div class="form-group d-flex">
                  <input type="text" class="form-control todo-list-input" placeholder="Add To-do">
                  <button type="submit" class="add btn btn-primary todo-list-add-btn" id="add-task">Add</button>
                </div>
              </form>
            </div>
            <div class="list-wrapper px-3">
              <ul class="d-flex flex-column-reverse todo-list">
                <li>
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Team review meeting at 3.00 PM
                    </label>
                  </div>
                  <i class="remove mdi mdi-close-circle-outline"></i>
                </li>
                <li>
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Prepare for presentation
                    </label>
                  </div>
                  <i class="remove mdi mdi-close-circle-outline"></i>
                </li>
                <li>
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox">
                      Resolve all the low priority tickets due today
                    </label>
                  </div>
                  <i class="remove mdi mdi-close-circle-outline"></i>
                </li>
                <li class="completed">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox" checked>
                      Schedule meeting for next week
                    </label>
                  </div>
                  <i class="remove mdi mdi-close-circle-outline"></i>
                </li>
                <li class="completed">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input class="checkbox" type="checkbox" checked>
                      Project review
                    </label>
                  </div>
                  <i class="remove mdi mdi-close-circle-outline"></i>
                </li>
              </ul>
            </div>
            <div class="events py-4 border-bottom px-3">
              <div class="wrapper d-flex mb-2">
                <i class="mdi mdi-circle-outline text-primary mr-2"></i>
                <span>Feb 11 2018</span>
              </div>
              <p class="mb-0 font-weight-thin text-gray">Creating component page</p>
              <p class="text-gray mb-0">build a js based app</p>
            </div>
            <div class="events pt-4 px-3">
              <div class="wrapper d-flex mb-2">
                <i class="mdi mdi-circle-outline text-primary mr-2"></i>
                <span>Feb 7 2018</span>
              </div>
              <p class="mb-0 font-weight-thin text-gray">Meeting with Alisa</p>
              <p class="text-gray mb-0 ">Call Sarah Graves</p>
            </div>
          </div>
          <!-- To do section tab ends -->
          <div class="tab-pane fade" id="chats-section" role="tabpanel" aria-labelledby="chats-section">
            <div class="d-flex align-items-center justify-content-between border-bottom">
              <p class="settings-heading border-top-0 mb-3 pl-3 pt-0 border-bottom-0 pb-0">Friends</p>
              <small class="settings-heading border-top-0 mb-3 pt-0 border-bottom-0 pb-0 pr-3 font-weight-normal">See All</small>
            </div>
            <ul class="chat-list">
              <li class="list active">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="online"></span></div>
                <div class="info">
                  <p>Thomas Douglas</p>
                  <p>Available</p>
                </div>
                <small class="text-muted my-auto">19 min</small>
              </li>
              <li class="list">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="offline"></span></div>
                <div class="info">
                  <div class="wrapper d-flex">
                    <p>Catherine</p>
                  </div>
                  <p>Away</p>
                </div>
                <div class="badge badge-primary badge-pill my-auto mx-2">4</div>
                <small class="text-muted my-auto">23 min</small>
              </li>
              <li class="list">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="online"></span></div>
                <div class="info">
                  <p>Daniel Russell</p>
                  <p>Available</p>
                </div>
                <small class="text-muted my-auto">14 min</small>
              </li>
              <li class="list">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="offline"></span></div>
                <div class="info">
                  <p>James Richardson</p>
                  <p>Away</p>
                </div>
                <small class="text-muted my-auto">2 min</small>
              </li>
              <li class="list">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="online"></span></div>
                <div class="info">
                  <p>Madeline Kennedy</p>
                  <p>Available</p>
                </div>
                <small class="text-muted my-auto">5 min</small>
              </li>
              <li class="list">
                <div class="profile"><img src="https://via.placeholder.com/40x40" alt="image"><span class="online"></span></div>
                <div class="info">
                  <p>Sarah Graves</p>
                  <p>Available</p>
                </div>
                <small class="text-muted my-auto">47 min</small>
              </li>
            </ul>
          </div>
          <!-- chat tab ends -->
        </div>
      </div>
      <!-- partial -->
      <!-- partial:../../partials/_sidebar.html -->
      <nav class="sidebar sidebar-offcanvas" id="sidebar">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="../../index.html">
              <i class="mdi mdi-clipboard-text-outline menu-icon"></i>
              <span class="menu-title">Dashboard</span>
            </a>
          </li>
            <div class="collapse" id="ui-advanced">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/dragula.html">Dragula</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/clipboard.html">Clipboard</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/context-menu.html">Context menu</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/slider.html">Sliders</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/carousel.html">Carousel</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/colcade.html">Colcade</a></li>
                <li class="nav-item"> <a class="nav-link" href="../../pages/ui-features/loaders.html">Loaders</a></li>
              </ul>
            </div>
          </li> 
          <li class="nav-item">
            <a class="nav-link" data-toggle="collapse" href="#form-elements" aria-expanded="false" aria-controls="form-elements">
              <i class="mdi mdi-clipboard-text-outline menu-icon"></i>
              <span class="menu-title">Transaction</span>
              <i class="menu-arrow"></i>
            </a>
            <div class="collapse" id="form-elements">
              <ul class="nav flex-column sub-menu">
                <li class="nav-item"><a class="nav-link" href="../../pages/forms/orders.html">Job Ordering Listing</a></li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
      <!-- partial -->
      <div class="main-panel">        
        <div class="content-wrapper">
          <div class="row">
            <div class="col-md-6 grid-margin stretch-card">
            </div>
            <div class="col-md-6 grid-margin stretch-card">
            </div>
            <div class="col-12 grid-margin">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Job Order Form</h4>
                  <form class="form-sample" id="jobOrderForm">
                    <p class="card-description">
                      Personal info
                    </p>
                    <hr></hr>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label  for="date" class="col-sm-3 col-form-label">DATE: </label>
                          <div class="col-sm-9">
                            <input type="date" class="form-control" id="date" name="date" required>
                        </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="contactPerson"class="col-sm-3 col-form-label" >CONTACT PERSON: </label>
                          <div class="col-sm-9">
                            <input type="text" class="form-control"  id="contactPerson" name="contactPerson" required>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="technical" class="col-sm-3 col-form-label">TECHNICAL</label>
                          <div class="col-sm-9">
                            <select class="form-control" id="technical" name="technical"></select>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                            <label for="customerInput" class="col-sm-3 col-form-label">CUSTOMER</label>
                            <div class="col-sm-9">
                                <div class="input-group">
                                    <input class="form-control" placeholder="CUSTOMER" id="customerInput" name="customerInput" disabled>
                                    <div class="input-group-append">
                                        <!-- Button to trigger the modal -->
                                        <button type="button" class="btn btn-" data-toggle="modal" data-target="#myModal">
                                            <i class="mdi mdi-plus-circle text-primary"></i> Add 
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal -->
<div class="modal fade" id="myModal">
  <div class="modal-dialog">
      <div class="modal-content">
          <!-- Modal Header -->
          <div class="modal-header">
              <h4 class="modal-title">Customer Form</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          
          <!-- Modal Body -->
          <div class="modal-body">
              <!-- Simple form -->
              
                  <div class="form-group">
                      <p>Customer Name</p>
                      <input type="text" class="form-control" id="cname" name="cname" placeholder="Customer Name*" required>
                  </div>
                  <div class="form-group">
                    <p>Address</p>
                      <input type="email" class="form-control" id="add" name="add" placeholder="Address" required>
                  </div>
                  <div class="form-group">
                    <p>Telephone</p>
                    <input type="email" class="form-control" id="telephone" name="telephone" placeholder="Telephone*" required>
                </div>
                <div class="form-group">
                  <p>Customer Email</p>
                  <input type="email" class="form-control" id="cemail" name="cemail" placeholder="Customer email"* required>
              </div>
              <div class="form-group">
                <p>Type</p>
                <select class="form-control" id="customerType" name="customerType">
                    <option value="" disabled selected hidden>Type</option>
                    <option value="REGULAR">REGULAR</option>
                    <option value="OTHERS">OTHERS</option>
                    <option value="DEALER">DEALER</option>
                </select>
            </div>
            <div class="form-group">
              <p>Terms</p>
              <select class="form-control" id="terms" name="terms">
                  <option value="" disabled selected hidden>Terms</option>
                  <option value="N/A">N/A</option>
                  <option value="45">45</option>
                  <option value="30">30</option>
                  <option value="15">15</option>
              </select>
            </div>
            </div>
          
           <!-- Modal Footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="modalCloseBtn"data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="modalSaveBtn">Save Changes</button>
               </div>
             </div>
           </div>
          </div>
                        </div>
                    </div>
                    
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="status" class="col-sm-3 col-form-label">STATUS</label>
                          <div class="col-sm-9">
                            <select class="form-control" id="status" name="status">
                              <option>OPEN</option>
                              <option>CLOSED</option>
                            </select>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="transpo" class="col-sm-3 col-form-label">TRANSPO</label>
                          <div class="col-sm-9">
                            <input class="form-control" placeholder="0" id="transpo" name="transpo"required>
                          </div>
                        </div>
                      </div>
                        <div class="form-group row">
                          <div class="col-sm-5">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="form-group row">
                        <label for="permitIssued"class="col-sm-3 col-form-label" style="padding-left: 20px;">PERMIT ISSUED</label>
                        <input class="form-check-input" type="checkbox" id="permitIssued" name="permitIssued">
                    </div>
                      <div class="form-group row">
                        <div class="col-sm-">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="remarks"class="col-sm-3 col-form-label" style="padding-left: 30px;">REMARKS</label>
                          <div class="col-sm-9"style="padding-left: 20px; padding-right: 20px;">
                            <input type="text" class="form-control" placeholder="REMARKS" id="remarks" name="remarks" required>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group row">
                          <label for="deliveryRemarks" class="col-sm-3 col-form-label"style="padding-left:30px;">DELIVERY REMARKS</label>
                          <div class="col-sm-9"style="padding-left: 20px; padding-right: 20px;">
                            <input type="text" class="form-control" placeholder="DELIVERY REMARKS" id="deliveryRemarks" name="deliveryRemarks" required>
                          </div>
                        </div>
                      </div>
                    </div>  
                    <hr></hr>
                    <center><h2>W O R K &nbsp; A C T I V I T Y</h2></center><br>
<div id="work-activity-container">
  <div class="row work-activity">
    <div class="col-md-6">
      <div class="form-group row">
        <label for="description" class="col-sm-3 col-form-label" style="padding-left: 30px;">DESCRIPTION: </label>
        <div class="col-sm-9" style="padding-left: 20px; padding-right: 20px;">
          <input type="text" class="form-control description" placeholder="DESCRIPTION" id="description" name="description" required>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group row">
        <label for="remarks2"class="col-sm-3 col-form-label" style="padding-left:30px;">REMARKS: </label>
        <div class="col-sm-9" style="padding-left: 20px; padding-right: 20px;">
          <input type="text" class="form-control remarks2" placeholder="REMARKS" id="remarks2" name="remarks2" required>

        </div>
      </div>
    </div>
  </div>
</div>
<div class="row">
  <div class="col-md-6">
    <div class="form-group row">
      <div class="col-sm-9 offset-sm-3" style="padding-left:30px;">
        
        <input type="submit" class="btn btn-secondary" value="Submit">
        <button type="button" class="add1" onclick="addWorkActivity()">
          <i class="mdi mdi-plus-circle text-primary"></i> Add New
        </button>
        <button type="button" class="add1" onclick="deleteLastWorkActivity()">
          <i class="mdi mdi-minus-circle text-danger"></i> Delete Recent
        </button>
       
      </div>
    </div>
  </div>
</div>
<script>
  var formData = {
  date: '',
  contactPerson: '',
  technical: '',
  cname: '',
  add: '',
  telephone: '',
  cemail: '',
  customerType: '',
  terms: '',
  status: '',
  transpo: '',
  permitIssued: '',
  remarks: '',
  deliveryRemarks: '',
  workActivities: []
};
  function addWorkActivity() {
    // Clone the first set of description and remarks fields
    var clone = document.querySelector('.work-activity').cloneNode(true);
  
    // Clear the input values in the cloned fields
    var inputs = clone.querySelectorAll('input');
    inputs.forEach(function(input) {
      input.value = '';
    });
  
    // Append the cloned fields to the container
    document.getElementById('work-activity-container').appendChild(clone);

    // Add event listeners to newly added elements to capture description and remarks2
    var newInputs = clone.querySelectorAll('input');
    newInputs.forEach(function(input) {
      input.addEventListener('input', function() {
        updateWorkActivitiesData();
      });
    });

    // Call the function to update the workActivities data
    updateWorkActivitiesData();
  }

  function deleteLastWorkActivity() {
    var workActivities = document.querySelectorAll('.work-activity');
    if (workActivities.length > 1) {
      workActivities[workActivities.length - 1].remove();
      // After removing the element, update the workActivities data
      updateWorkActivitiesData();
    }
  }

  function updateWorkActivitiesData() {
  // Extract description and remarks2 values from all work activities
  var workActivitiesData = [];
  var workActivityElements = document.querySelectorAll('.work-activity');

  workActivityElements.forEach(function(activityElement) {
    var descriptionField = activityElement.querySelector('.description');
    var remarks2Field = activityElement.querySelector('.remarks2');

    if (descriptionField && remarks2Field) {
      var description = descriptionField.value;
      var remarks2 = remarks2Field.value;

      workActivitiesData.push({ description, remarks2 });
    } else {
      console.error('Field elements not found for work activity:', activityElement);
    }
  });

  // Update the global formData.workActivities array
  formData.workActivities = workActivitiesData;
}


</script>


                    
                    
                    
                  
                  </form>
                </div>
              </div>
            </div>
            <div class="col-md-6 grid-margin stretch-card">      
            </div>
            <div class="col-md-6 grid-margin stretch-card">
            </div>
          </div>
        </div>
        <!-- content-wrapper ends -->
        <!-- partial:../../partials/_footer.html -->
        <!-- partial -->
      </div>
      <!-- main-panel ends -->
    </div>
    <!-- page-body-wrapper ends -->
  </div>
  <footer class="footer">
    <div class="d-sm-flex justify-content-center justify-content-sm-between">
      <span class="text-muted text-center text-sm-left d-block d-sm-inline-block"></a></span>
      <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i class="mdi mdi-heart-outline text-primary"></i></span>
    </div>
  </footer>

  <!-- container-scroller -->
  <!-- base:js -->
  <script src="../../../../css/vendors/js/vendor.bundle.base.js"></script>
  <!-- endinject -->
  <!-- inject:js -->
  <script src="../../../../css/js/off-canvas.js"></script>
  <script src="../../../../css/js/hoverable-collapse.js"></script>
  <script src="../../../../css/js/template.js"></script>
  <script src="../../../../css/js/settings.js"></script>
  <script src="../../../../css/js/todolist.js"></script>
  <!-- endinject -->
  <!-- plugin js for this page -->
  <script src="../../../../css/vendors/typeahead.js/typeahead.bundle.min.js"></script>
  <script src="../../../../css/vendors/select2/select2.min.js"></script>
  <!-- End plugin js for this page -->
  <!-- Custom js for this page-->
  <script src="../../../../css/js/file-upload.js"></script>
  <script src="../../../../css/js/typeahead.js"></script>
  <script src="../../../../css/js/select2.js"></script>

<!-- Bootstrap JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<!-- script for getting technical -->
<script>
  // Retrieve the user ID from sessionStorage
  const userId = sessionStorage.getItem('userId');

  // Check if the user ID is available
  if (userId) {
    console.log('User ID retrieved on other page:', userId);

    // Display the user ID wherever you want
    const userIdElement = document.createElement('p');
    userIdElement.textContent = 'User ID: ' + userId;
    document.body.appendChild(userIdElement);
  } else {
    console.error('User ID not found in sessionStorage on other page');
  }
</script>

<script>
  // Fetch data from the server endpoint
  fetch('/get/technical')
    .then(response => response.json())
    .then(data => {
      // Populate the dropdown with fetched data
      const dropdown = document.getElementById('technical');
      
      data.forEach(entry => {
        const { id, full_name } = entry;
        
        const option = document.createElement('option');
        option.value = id;  // Set the value to the employee ID
        option.textContent = full_name;  // Set the display text to the employee name
        dropdown.appendChild(option);
      });

      // Add event listener to handle selection
      dropdown.addEventListener('change', function () {
        const selectedEmployeeId = this.value;
        console.log('Selected Employee ID:', selectedEmployeeId);
      });
    })
    .catch(error => console.error('Error fetching data:', error));
</script>



<!-- Include Bootstrap JavaScript library -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    // Get the elements
    const customerInput = document.getElementById('customerInput');
    const modalSaveBtn = document.getElementById('modalSaveBtn');
    const modalCloseBtn = document.getElementById('modalCloseBtn');
    const myModal = document.getElementById('myModal');

    // Add an event listener to the Save Changes button in the modal
    modalSaveBtn.addEventListener('click', function () {
      // Get values from the modal form
      const cname = document.getElementById('cname').value;
      const add = document.getElementById('add').value;
      const telephone = document.getElementById('telephone').value;
      const cemail = document.getElementById('cemail').value;
      const customerType = document.getElementById('customerType').value;
      const terms = document.getElementById('terms').value;

      // Update the disabled input field with the customer name
      customerInput.value = cname;

      // Close the modal
      $('#myModal').modal('hide');
      // Remove modal backdrop
      $('.modal-backdrop').remove();
    });

    // Add an event listener to the modal's close button
    modalCloseBtn.addEventListener('click', function () {
      $('#myModal').modal('hide');
      // Remove modal backdrop
      $('.modal-backdrop').remove();
    });
  });
</script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
      const permitIssued = document.getElementById('permitIssued');

      // Add an event listener to the checkbox
      permitIssued.addEventListener('change', function () {
          // Update the value based on the checkbox state
          const value = this.checked ? 'Yes' : 'No';
          console.log('Checkbox value:', value);
          // You can use the 'value' variable as needed, for example, send it to the server or update other elements.
      });
  });

  document.getElementById('submitBtn').addEventListener('click', function (e) {
    e.preventDefault();

    try {
      // Validate all fields are filled
      if (!validateForm()) {
        // Show SweetAlert indicating that all fields must be filled
        showSwal('error-message', 'All fields must be filled.');
        return;
      }

          const userId = sessionStorage.getItem('userId');

        // Check if user ID is available
        if (!userId) {
          // If user ID is not available, show an error message
          console.error('User ID not found in sessionStorage.');
          showSwal('error-message', 'User ID not found.');
          return;
        }

      // Collect form data
      const formData = {
        date: document.getElementById('date').value,
        contactPerson: document.getElementById('contactPerson').value,
        technical: document.getElementById('technical').value,
        cname: document.getElementById('cname').value,
        add: document.getElementById('add').value,
        telephone: document.getElementById('telephone').value,
        cemail: document.getElementById('cemail').value,
        customerType: document.getElementById('customerType').value,
        terms: document.getElementById('terms').value,
        status: document.getElementById('status').value,
        transpo: parseFloat(document.getElementById('transpo').value) || 0,
        permitIssued: document.getElementById('permitIssued').checked ? 'Yes' : 'No',
        remarks: document.getElementById('remarks').value,
        deliveryRemarks: document.getElementById('deliveryRemarks').value,
        workActivities: [],
        userId: userId,
      };

      // Collect work activities
      const workActivityElements = document.querySelectorAll('.work-activity');
      workActivityElements.forEach(function (activityElement, index) {
        const descriptionField = activityElement.querySelector('.description');
        const remarks2Field = activityElement.querySelector('.remarks2');

        if (descriptionField && remarks2Field) {
          const description = descriptionField.value;
          const remarks2 = remarks2Field.value;

          formData.workActivities.push({ description, remarks2 });
        } else {
          console.error(`Field elements not found for work activity at index ${index}.`);
        }
      });axios.post(`/submit-form`, formData)
  .then((res) => {
    console.log(res);
    // Show success message with SweetAlert
    showSwal('success-message');
  })
  .catch((err) => {
    console.error(err);
    // Show error message with SweetAlert
    showSwal('error-message');
  })
        .catch((err) => {
          console.error(err);
          // Show error message with SweetAlert
          showSwal('error-message', function () {
            window.location.href = '/pages/content/pages/forms/job_ordering.html';
          });
        });
    } catch (error) {
      console.error('Error during form submission:', error);
      // Show generic error message with SweetAlert
      showSwal('error-message', function () {
        window.location.href = '/pages/content/pages/forms/job_ordering.html';
      });
    }
  });

  // Function to show SweetAlert
  function showSwal(type) {
  Swal.fire({
    icon: type === 'success-message' ? 'success' : 'error',
    title: type === 'success-message' ? 'Success' : 'Error',
    text: type === 'success-message' ? 'Form submitted successfully' : 'Error submitting form',
  }).then((result) => {
    if (result.isConfirmed && type === 'success-message') {
      console.log('Redirecting to job_ordering.html');
      try {
        window.location.href = '/pages/content/pages/forms/job_ordering.html';
      } catch (error) {
        console.error('Error during redirect:', error);
      }
    }
  });
}


  // Function to validate all fields are filled
  function validateForm() {
  const requiredFields = document.querySelectorAll('.form-control[required]');
  for (const field of requiredFields) {
    console.log('Field:', field.id, 'Value:', field.value.trim());
    if (!field.value.trim()) {
      return false;
    }
  }
  return true;
}

</script>



</body>
</html>
